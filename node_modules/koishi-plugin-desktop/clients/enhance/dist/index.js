import{Schema as v,useConfig as K}from"../client.js";import{watchEffect as R}from"../vue.js";var S={exports:{}},x,z;function D(){return z||(z=1,x={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),x}var C={exports:{}},M,A;function P(){return A||(A=1,M=function(r){return!r||typeof r=="string"?false:r instanceof Array||Array.isArray(r)||r.length>=0&&(r.splice instanceof Function||Object.getOwnPropertyDescriptor(r,r.length-1)&&r.constructor.name!=="String")}),M}var E;function B(){if(E)return C.exports;E=1;var t=P(),r=Array.prototype.concat,g=Array.prototype.slice,p=C.exports=function(i){for(var u=[],d=0,e=i.length;d<e;d++){var s=i[d];t(s)?u=r.call(u,g.call(s)):u.push(s)}return u};return p.wrap=function(m){return function(){return m(p(arguments))}},C.exports}var I;function U(){if(I)return S.exports;I=1;var t=D(),r=B(),g=Object.hasOwnProperty,p=Object.create(null);for(var m in t)g.call(t,m)&&(p[t[m]]=m);var i=S.exports={to:{},get:{}};i.get=function(e){var s=e.substring(0,3).toLowerCase(),o,c;switch(s){case"hsl":o=i.get.hsl(e),c="hsl";break;case"hwb":o=i.get.hwb(e),c="hwb";break;default:o=i.get.rgb(e),c="rgb";break}return o?{model:c,value:o}:null},i.get.rgb=function(e){if(!e)return null;var s=/^#([a-f0-9]{3,4})$/i,o=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,c=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,b=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,w=/^(\w+)$/,l=[0,0,0,1],a,n,f;if(a=e.match(o)){for(f=a[2],a=a[1],n=0;n<3;n++){var L=n*2;l[n]=parseInt(a.slice(L,L+2),16)}f&&(l[3]=parseInt(f,16)/255)}else if(a=e.match(s)){for(a=a[1],f=a[3],n=0;n<3;n++)l[n]=parseInt(a[n]+a[n],16);f&&(l[3]=parseInt(f+f,16)/255)}else if(a=e.match(c)){for(n=0;n<3;n++)l[n]=parseInt(a[n+1],0);a[4]&&(a[5]?l[3]=parseFloat(a[4])*.01:l[3]=parseFloat(a[4]))}else if(a=e.match(b)){for(n=0;n<3;n++)l[n]=Math.round(parseFloat(a[n+1])*2.55);a[4]&&(a[5]?l[3]=parseFloat(a[4])*.01:l[3]=parseFloat(a[4]))}else return(a=e.match(w))?a[1]==="transparent"?[0,0,0,0]:g.call(t,a[1])?(l=t[a[1]],l[3]=1,l):null:null;for(n=0;n<3;n++)l[n]=u(l[n],0,255);return l[3]=u(l[3],0,1),l},i.get.hsl=function(e){if(!e)return null;var s=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,o=e.match(s);if(o){var c=parseFloat(o[4]),b=(parseFloat(o[1])%360+360)%360,w=u(parseFloat(o[2]),0,100),l=u(parseFloat(o[3]),0,100),a=u(isNaN(c)?1:c,0,1);return[b,w,l,a]}return null},i.get.hwb=function(e){if(!e)return null;var s=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,o=e.match(s);if(o){var c=parseFloat(o[4]),b=(parseFloat(o[1])%360+360)%360,w=u(parseFloat(o[2]),0,100),l=u(parseFloat(o[3]),0,100),a=u(isNaN(c)?1:c,0,1);return[b,w,l,a]}return null},i.to.hex=function(){var e=r(arguments);return"#"+d(e[0])+d(e[1])+d(e[2])+(e[3]<1?d(Math.round(e[3]*255)):"")},i.to.rgb=function(){var e=r(arguments);return e.length<4||e[3]===1?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"},i.to.rgb.percent=function(){var e=r(arguments),s=Math.round(e[0]/255*100),o=Math.round(e[1]/255*100),c=Math.round(e[2]/255*100);return e.length<4||e[3]===1?"rgb("+s+"%, "+o+"%, "+c+"%)":"rgba("+s+"%, "+o+"%, "+c+"%, "+e[3]+")"},i.to.hsl=function(){var e=r(arguments);return e.length<4||e[3]===1?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"},i.to.hwb=function(){var e=r(arguments),s="";return e.length>=4&&e[3]!==1&&(s=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+s+")"},i.to.keyword=function(e){return p[e.slice(0,3)]};function u(e,s,o){return Math.min(Math.max(s,e),o)}function d(e){var s=Math.round(e).toString(16).toUpperCase();return s.length<2?"0"+s:s}return S.exports}var T=U();const O="koishell-enhance-stylesheet",q=`
*:not(
    input,
    textarea,
    .monaco-mouse-cursor-text,
    .monaco-mouse-cursor-text *,
    .k-text-selectable,
    .k-text-selectable *
  ) {
  -webkit-touch-callout: none !important;
  user-select: none !important;
  -webkit-user-select: none !important;
  cursor: default !important;
}

`,$=`
body,
nav.layout-activity {
  background: transparent !important;
}

@media screen and (min-width: 768px) {
  div.layout-container {
    clip-path: inset(0 0 round 12px 0 0 0) !important;
  }
}

nav.layout-activity {
  border: 0 !important;
}

`,V=`
.layout-activity,
.layout-container {
  border-top: var(--k-color-divider-dark) 1px solid;
}

`,G=`
.layout-container,
.main-container,
.layout-container .layout-aside,
.layout-status {
  background: transparent !important;
}

`;let y,h;const _=t=>{const r=T.get(window.getComputedStyle(window.document.documentElement).getPropertyValue(t));return!r||!r.value?"000000":T.to.hex(r.value).slice(1,7)},F=t=>{var r,g,p,m,i,u,d,e;switch((r=window.__KOI_SHELL__)==null?void 0:r.agent){case"shellwin":(m=(p=(g=window.chrome)==null?void 0:g.webview)==null?void 0:p.postMessage)==null||m.call(p,t);return;case"shellmac":(e=(d=(u=(i=window.webkit)==null?void 0:i.messageHandlers)==null?void 0:u.shellmacHandler)==null?void 0:d.postMessage)==null||e.call(d,t);return;case"shelllinux":return;default:return}},J=t=>{var r;if(h)switch((r=t.value.desktop)==null?void 0:r.enhance){case"off":break;case"enhanceColor":h.innerHTML=q+V;break;case"enhanceTrans":h.innerHTML=q+$+G;break;default:h.innerHTML=q+$;break}},Q=t=>{var r;switch((r=t.value.desktop)==null?void 0:r.enhance){case"off":break;case"enhanceColor":F(`T${window.document.documentElement.classList.contains("dark")?"D":"L"}C${_("--k-color-border")}${_("--bg1")}${_("--fg1")}`);break;default:F(window.document.documentElement.classList.contains("dark")?"TD":"TL");break}},W=()=>F("TR"),N=()=>{W()},H=t=>{var r;if(((r=t.value.desktop)==null?void 0:r.enhance)==="off"){N();return}J(t),Q(t)},k=t=>{var r;return Array.isArray((r=window.__KOI_SHELL__)==null?void 0:r.supports)&&window.__KOI_SHELL__.supports.includes(t)},Z=t=>{t.settings({id:"appearance",schema:v.object({desktop:v.object({enhance:v.union([v.const("off").description("\u589E\u5F3A\u5173\u95ED"),v.const("enhance").description("\u589E\u5F3A").disabled(!k("enhance")),v.const("enhanceColor").description("\u589E\u5F3A\u8272\u5F69").disabled(!k("enhanceColor")),v.const("enhanceTrans").description("\u589E\u5F3A\u900F\u89C6").disabled(!k("enhance"))].filter(Boolean)).default(k("enhance")?"enhance":"off").description("Koishi \u684C\u9762\u589E\u5F3A\u6A21\u5F0F\u3002")}).description("Koishi \u684C\u9762\u589E\u5F3A")})}),t.on("ready",()=>{if(!k("enhance"))return;const r=K();h||(h=window.document.getElementById(O),h=document.createElement("style"),h.id=O,document.head.appendChild(h)),t.on("dispose",()=>{h&&window.document.head.removeChild(h)}),y||(y=new MutationObserver(()=>H(r)),y.observe(window.document.documentElement,{attributes:true})),t.on("dispose",()=>{y&&y.disconnect()}),R(()=>H(r)),t.on("dispose",N)})};export{Z as default};
