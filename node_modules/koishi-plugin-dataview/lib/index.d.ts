import { Context, Dict, Driver, Field, Model, Schema } from 'koishi';
import { DataService } from '@koishijs/console';
export function serialize(obj: unknown): string;
export function deserialize(str: string): unknown;
export type Methods = 'get' | 'set' | 'eval' | 'create' | 'remove' | 'upsert' | 'drop' | 'stats';
export type DbEvents = {
    [M in Methods as `database/${M}`]: (...args: string[]) => Promise<string>;
};
declare module '@koishijs/console' {
    namespace Console {
        interface Services {
            database: DatabaseProvider;
        }
    }
    interface Events extends DbEvents {
    }
}
export interface TableInfo extends Driver.TableStats, Model.Config<any> {
    fields: Field.Config;
    primary: string[];
    HookObjectId: (value: any) => void;
}
export interface DatabaseInfo extends Driver.Stats {
    tables: Dict<TableInfo>;
}
declare class DatabaseProvider extends DataService<DatabaseInfo> {
    static filter: boolean;
    static inject: string[];
    task: Promise<DatabaseInfo>;
    addListener<K extends Methods>(name: K, refresh?: boolean): void;
    constructor(ctx: Context);
    getInfo(): Promise<DatabaseInfo>;
    get(forced?: boolean): Promise<DatabaseInfo>;
}
declare namespace DatabaseProvider {
    interface Config {
    }
    const Config: Schema<Config>;
}
export default DatabaseProvider;
